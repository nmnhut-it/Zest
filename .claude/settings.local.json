{
  "permissions": {
    "allow": [
      "mcp__ide__getDiagnostics",
      "Bash(cp:*)",
      "Bash(./gradlew:*)",
      "Bash(find:*)",
      "Bash(rm:*)",
      "Bash(export:*)",
      "WebFetch(domain:docs.langchain4j.dev)",
      "WebSearch",
      "Bash(timeout 30s ./gradlew compileKotlin:*)",
      "Bash(tee:*)",
      "Bash(timeout 300s ./gradlew test:*)",
      "Bash(JAVA_HOME=\"D:/Program Files/JetBrains/IntelliJ IDEA Community Edition 2025.2.4/jbr\" PATH=\"$JAVA_HOME/bin:$PATH\" timeout 90s ./gradlew:*)",
      "WebFetch(domain:qwenlm.github.io)",
      "Bash(qwen --yolo -p \"Write unit tests for the following Java class. Output ONLY the complete Java test class code, nothing else.\n\nTarget Class: GameRequestHandler\n\npackage modules.battle.game.setting;\n\nimport bitzero.framework.common.MsgService;\nimport framework.constant.ErrorDefine;\nimport modules.admin.payload.response.ResponseBroadCastWithUId;\nimport modules.battle.TableMsgWrapper;\nimport modules.battle.game.GameConst;\nimport modules.battle.game.payload.request.RequestPlayerPlayCard;\nimport modules.battle.table.model.BaseTable;\nimport modules.battle.table.setting.TableServiceImpl;\nimport modules.battle.game.model.Game;\nimport bitzero.server.entities.User;\nimport bitzero.server.extensions.BaseClientRequestHandler;\nimport bitzero.server.extensions.data.DataCmd;\nimport framework.constant.CmdDefine;\n\npublic class GameRequestHandler extends BaseClientRequestHandler {\n    @Override\n    public void handleClientRequest\\(User user, DataCmd cmd\\) {\n        TableServiceImpl.getInstance\\(\\).getTableFromUser\\(user.getId\\(\\)\\).ifPresent\\(table -> {\n            Game game = table.getGame\\(\\);\n            if \\(game == null\\) return;\n            switch \\(cmd.getId\\(\\)\\) {\n                case CmdDefine.PRESS_START_GAME:\n                    processPressStartGame\\(\\(BaseTable\\)table, user, cmd\\);\n                    break;\n                case CmdDefine.PLAYER_PLAY_CARD:\n                    processPlayerPlayCard\\(\\(BaseTable\\)table, user, cmd\\);\n                    break;\n                case CmdDefine.FORCE_END_GAME:\n                    processForceEndGame\\(game, user, cmd\\);\n                    break;\n                case CmdDefine.EAT_BEGINING_ESCOBA:\n                    processEatBeginingEscoba\\(\\(BaseTable\\)table, user, cmd\\);\n                    break;\n            }\n        }\\);\n    }\n    private void processPlayerPlayCard\\(BaseTable table, User user, DataCmd cmd\\) {\n        RequestPlayerPlayCard req = new RequestPlayerPlayCard\\(cmd\\);\n        req.unpackData\\(\\);\n        if \\(req.listCard.isEmpty\\(\\)\\) {\n            MsgService.responseCommon\\(user, cmd.getId\\(\\), ErrorDefine.PARAM_INVALID\\);\n            return;\n        }\n        if \\(!table.tryPlayCard\\(user, req.listCard\\)\\) {\n            MsgService.responseCommon\\(user, cmd.getId\\(\\), ErrorDefine.FAIL\\);\n            return;\n        }\n    }\n    private void processPressStartGame\\(BaseTable table, User user, DataCmd cmd\\) {\n        if \\(!table.tryStartGame\\(user\\)\\) {\n            MsgService.responseCommon\\(user, cmd.getId\\(\\), ErrorDefine.FAIL\\);\n        }\n    }\n    private void processEatBeginingEscoba\\(BaseTable table, User user, DataCmd cmd\\) {\n        int err = table.eatBeginingEscoba\\(user.getId\\(\\)\\);\n        if \\(err != ErrorDefine.SUCCESS\\) {\n            MsgService.responseCommon\\(user, cmd.getId\\(\\), ErrorDefine.FAIL\\);\n        } else {\n            ResponseBroadCastWithUId res = new ResponseBroadCastWithUId\\(user.getId\\(\\), CmdDefine.EAT_BEGINING_ESCOBA\\);\n            table.broadcast\\(new TableMsgWrapper\\(res\\)\\);\n        }\n    }\n    private void processForceEndGame\\(Game game, User user, DataCmd cmd\\) {\n        game.forceEnd\\(user.getId\\(\\)\\);\n    }\n}\n\nRequirements:\n1. Write JUnit 5 tests\n2. Test all 4 command handlers\n3. Cover happy path and error cases\n4. Output a complete, compilable test class\")",
      "Bash(qwen --yolo -p \"Write unit tests for GameRequestHandler. Output ONLY the complete Java test class code.\n\npackage modules.battle.game.setting;\npublic class GameRequestHandler extends BaseClientRequestHandler {\n    public void handleClientRequest\\(User user, DataCmd cmd\\) {\n        TableServiceImpl.getInstance\\(\\).getTableFromUser\\(user.getId\\(\\)\\).ifPresent\\(table -> {\n            Game game = table.getGame\\(\\);\n            if \\(game == null\\) return;\n            switch \\(cmd.getId\\(\\)\\) {\n                case CmdDefine.PRESS_START_GAME: processPressStartGame\\(\\(BaseTable\\)table, user, cmd\\); break;\n                case CmdDefine.PLAYER_PLAY_CARD: processPlayerPlayCard\\(\\(BaseTable\\)table, user, cmd\\); break;\n                case CmdDefine.FORCE_END_GAME: processForceEndGame\\(game, user, cmd\\); break;\n                case CmdDefine.EAT_BEGINING_ESCOBA: processEatBeginingEscoba\\(\\(BaseTable\\)table, user, cmd\\); break;\n            }\n        }\\);\n    }\n    private void processPlayerPlayCard\\(BaseTable table, User user, DataCmd cmd\\) {\n        RequestPlayerPlayCard req = new RequestPlayerPlayCard\\(cmd\\); req.unpackData\\(\\);\n        if \\(req.listCard.isEmpty\\(\\)\\) { MsgService.responseCommon\\(user, cmd.getId\\(\\), ErrorDefine.PARAM_INVALID\\); return; }\n        if \\(!table.tryPlayCard\\(user, req.listCard\\)\\) { MsgService.responseCommon\\(user, cmd.getId\\(\\), ErrorDefine.FAIL\\); }\n    }\n    private void processPressStartGame\\(BaseTable table, User user, DataCmd cmd\\) {\n        if \\(!table.tryStartGame\\(user\\)\\) { MsgService.responseCommon\\(user, cmd.getId\\(\\), ErrorDefine.FAIL\\); }\n    }\n    private void processEatBeginingEscoba\\(BaseTable table, User user, DataCmd cmd\\) {\n        int err = table.eatBeginingEscoba\\(user.getId\\(\\)\\);\n        if \\(err != ErrorDefine.SUCCESS\\) { MsgService.responseCommon\\(user, cmd.getId\\(\\), ErrorDefine.FAIL\\); }\n        else { table.broadcast\\(new TableMsgWrapper\\(new ResponseBroadCastWithUId\\(user.getId\\(\\), CmdDefine.EAT_BEGINING_ESCOBA\\)\\)\\); }\n    }\n    private void processForceEndGame\\(Game game, User user, DataCmd cmd\\) { game.forceEnd\\(user.getId\\(\\)\\); }\n}\n\nWrite JUnit 5 tests. Test all 4 handlers with happy path and error cases.\")",
      "Bash(qwen --yolo -p \"Output the COMPLETE Java code for a JUnit 5 test class for GameRequestHandler. I need the FULL code printed to console, not a summary.\n\nGameRequestHandler has 4 methods: processPlayerPlayCard, processPressStartGame, processEatBeginingEscoba, processForceEndGame.\n\nJust print the complete test class code. Start with package declaration.\")",
      "Bash(xargs:*)",
      "Bash(qwen --mcp-server zest-intellij:*)",
      "Bash(qwen:*)"
    ],
    "deny": [],
    "defaultMode": "acceptEdits"
  }
}
