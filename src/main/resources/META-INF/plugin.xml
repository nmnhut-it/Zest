<idea-plugin>
    <name>Zest</name>
    <id>com.zps.Zest</id>
    <version>2.0.0</version>
    <vendor email="nhutnm3@vng.com.vn" url="https://www.vng.com.vn">Zingplay Game Studio</vendor>

    <description><![CDATA[
   <h2>Zest: AI-Powered Test Generation via MCP</h2>
   <p><b>Zest</b> provides intelligent test generation powered by AI through the Model Context Protocol (MCP).
   Use with Claude Desktop, Cursor, Continue.dev, or any MCP-compatible client.</p>]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>
    <depends>org.jetbrains.plugins.terminal</depends>
    <idea-version since-build="223.0" until-build="259.*"/>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="com.zps.zest.settings.ZestGlobalSettings"/>
        <applicationService serviceImplementation="com.zps.zest.mcp.ZestMcpToolServerService"/>
        <projectService serviceImplementation="com.zps.zest.settings.ZestProjectSettings"/>

        <backgroundPostStartupActivity implementation="com.zps.zest.mcp.ZestMcpToolServerStartupActivity"/>
        <backgroundPostStartupActivity implementation="com.zps.zest.settings.SettingsMigrationNotice"/>

        <projectConfigurable groupId="tools" instance="com.zps.zest.settings.ZestSettingsConfigurable"
                displayName="Zest Plugin" id="zest.settings" nonDefaultProject="true"/>

        <notificationGroup id="Zest LLM" displayType="BALLOON" toolWindowId="Terminal" isLogByDefault="false"/>

        <projectService serviceImplementation="com.zps.zest.langchain4j.ZestLangChain4jService"/>
        <projectService serviceImplementation="com.zps.zest.langchain4j.naive_service.NaiveStreamingLLMService"/>
        <projectService serviceImplementation="com.zps.zest.continuedev.ContinueConfigurationService"/>
        <projectService serviceImplementation="com.zps.zest.mcp.AiClientConfigService"/>
    </extensions>

    <actions>
        <group id="ZestGroup" text="Zest" description="AI-powered tools" popup="true" icon="com.zps.zest.core.ZestIcons.ZEST">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
        </group>

        <action id="Zest.ShowMcpConfig" class="com.zps.zest.mcp.ShowMcpConfigAction"
                text="MCP Server Config" description="Show MCP configuration for AI clients (Claude, Cursor, Continue.dev, etc.)">
            <add-to-group group-id="ZestGroup" anchor="first"/>
        </action>

        <!-- MCP Setup Submenu -->
        <group id="ZestMcpSetupGroup" text="Install MCP For..." description="Setup Zest MCP for AI clients" popup="true">
            <add-to-group group-id="ZestGroup" anchor="last"/>
        </group>

        <action id="Zest.SetupMcpClients" class="com.zps.zest.mcp.SetupMcpClientAction"
                text="All Clients..." description="Setup Zest MCP for multiple AI clients at once">
            <add-to-group group-id="ZestMcpSetupGroup" anchor="first"/>
        </action>


        <action id="Zest.SetupContinueMcp" class="com.zps.zest.mcp.SetupContinueDevMcpAction"
                text="Continue.dev" description="Setup Zest MCP for Continue.dev">
            <add-to-group group-id="ZestMcpSetupGroup"/>
        </action>

        <action id="Zest.SetupClaudeDesktopMcp" class="com.zps.zest.mcp.SetupClaudeDesktopMcpAction"
                text="Claude Desktop" description="Setup Zest MCP for Claude Desktop">
            <add-to-group group-id="ZestMcpSetupGroup"/>
        </action>

        <action id="Zest.SetupCursorMcp" class="com.zps.zest.mcp.SetupCursorMcpAction"
                text="Cursor" description="Setup Zest MCP for Cursor editor">
            <add-to-group group-id="ZestMcpSetupGroup"/>
        </action>

        <action id="Zest.SetupClineMcp" class="com.zps.zest.mcp.SetupClineMcpAction"
                text="Cline" description="Setup Zest MCP for Cline (VS Code)">
            <add-to-group group-id="ZestMcpSetupGroup"/>
        </action>

        <action id="Zest.SetupWindsurfMcp" class="com.zps.zest.mcp.SetupWindsurfMcpAction"
                text="Windsurf" description="Setup Zest MCP for Windsurf">
            <add-to-group group-id="ZestMcpSetupGroup"/>
        </action>

        <action id="Zest.SetupClaudeCodeMcp" class="com.zps.zest.mcp.SetupClaudeCodeMcpAction"
                text="Claude Code" description="Setup Zest MCP for Claude Code CLI">
            <add-to-group group-id="ZestMcpSetupGroup"/>
        </action>

        <action id="Zest.SetupKiloCodeMcp" class="com.zps.zest.mcp.SetupKiloCodeMcpAction"
                text="Kilo Code" description="Setup Zest MCP for Kilo Code (VS Code)">
            <add-to-group group-id="ZestMcpSetupGroup"/>
        </action>

        <action id="Zest.SetupQwenCoderMcp" class="com.zps.zest.mcp.SetupQwenCoderMcpAction"
                text="Qwen Coder" description="Setup Zest MCP for Qwen Coder">
            <add-to-group group-id="ZestMcpSetupGroup"/>
        </action>

        <action id="Zest.SetupGeminiCliMcp" class="com.zps.zest.mcp.SetupGeminiCliMcpAction"
                text="Gemini CLI" description="Setup Zest MCP for Gemini CLI">
            <add-to-group group-id="ZestMcpSetupGroup"/>
        </action>
    </actions>

    <change-notes><![CDATA[
        <h3>Version 2.0.0 - MCP-First</h3>
        <ul>
            <li><b>MCP Server:</b> Full test generation via MCP protocol</li>
            <li><b>Prompts:</b> /zest-test-context, /zest-test-plan, /zest-test-write workflow</li>
            <li><b>Tools:</b> analyzeTestability, generateTestPlan, generateTestCode, analyzeTestGaps</li>
            <li><b>Integration:</b> Works with Claude Desktop, Cursor, Continue.dev</li>
        </ul>
    ]]></change-notes>
</idea-plugin>
