<idea-plugin><id>com.zps.Zest</id>Guidelines:
    https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>Zest</name>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.zps.Zest</id>
    <version>1.9.862</version>  <!-- Replace with your actual version -->
    <vendor email="nhutnm3@vng.com.vn" url="https://www.vng.com.vn">Zingplay Game Studio</vendor>
    <description><![CDATA[
   <h2>Zest: Smarter Java Development with AI</h2>
   <p><b>Zest</b> supercharges your IntelliJ workflow. Instantly generate JUnit tests, implement TODOs, and refactor for testabilityâ€”all powered by AI. Enjoy one-click code reviews, auto-generated commit messages, and smart comments. Boost productivity, ship quality code, and let Zest handle the repetitive stuff so you can focus on building great software. Try Zest and make testing effortless.</p>]]></description>
    Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>
    <idea-version since-build="223.0" until-build="251.*"/>
    <projectListeners>

        <listener class="com.zps.zest.inlinechat.SelectionGutterIconManager"
                  topic="com.intellij.openapi.startup.ProjectActivity"/>

        <listener class="com.zps.zest.inlinechat.JCefInitializer"
                  topic="com.intellij.openapi.startup.ProjectActivity"/>
    </projectListeners>
<!--    <&#45;&#45; Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html &ndash;&gt;-->
    <extensions defaultExtensionNs="com.intellij">
        <postStartupActivity implementation="com.zps.zest.completion.ZestCompletionStartupActivity"/>
        <editorFactoryListener implementation="com.zps.zest.events.ZestEditorFactoryListener"/>
        <actionPromoter order="first" implementation="com.zps.zest.completion.actions.ZestActionPromoter"/>


        <toolWindow id="ZPS Chat"
                    anchor="right"
                    factoryClass="com.zps.zest.browser.WebBrowserToolWindow"
                    icon="icons/zpsChat.svg"
                    canCloseContents="false"/>


        <toolWindow id="Test Writing Assistant"
                    anchor="bottom"
                    factoryClass="com.zps.zest.testing.TestWritingToolWindowFactory"
                    icon="icons/testWriting.svg"
                    canCloseContents="true"
                    doNotActivateOnStart="false"
                    secondary="false"/>


        <toolWindow id="Refactoring for Testability"
                    anchor="bottom"
                    factoryClass="com.zps.zest.refactoring.RefactoringToolWindowFactory"
                    icon="icons/refactoring.svg"
                    canCloseContents="true"
                    doNotActivateOnStart="false"
                    secondary="false"/>
        <projectConfigurable
                instance="com.zps.zest.settings.ZestSettingsConfigurable"
                displayName="Zest Plugin"
                id="zest.settings"
                parentId="tools"
                nonDefaultProject="true"/>


        <projectConfigurable
                instance="com.zps.zest.langchain4j.HybridIndexConfigurable"
                displayName="Hybrid Code Search Index"
                id="zest.hybrid.index"
                parentId="tools"
                nonDefaultProject="true"/>


        <notificationGroup id="Zest LLM" displayType="BALLOON" toolWindowId="Terminal" isLogByDefault="false"/>


        <intentionAction>
            <className>com.zps.zest.inlinechat.InlineChatIntentionAction</className>
            <category>Zest</category>
            <descriptionDirectoryName>InlineChatIntentionAction</descriptionDirectoryName>
        </intentionAction>


        <highlightingPassFactory implementation="com.zps.zest.inlinechat.DiffHighlighterRegister"/>
    </extensions>
    <actions>
        <group id="Zest.InlineCompletion" text="Zest Inline Completion">
            <action id="Zest.InlineCompletion.Trigger"
                    class="com.zps.zest.completion.actions.ZestTrigger"
                    text="Trigger Inline Completion">
            </action>

            <action id="Zest.InlineCompletion.ImmediateTrigger"
                    class="com.zps.zest.completion.actions.ZestTriggerMethodRewriteAction"
                    text="Immediate Inline Completion">
                <keyboard-shortcut first-keystroke="ctrl SPACE" keymap="$default"/>
            </action>

            <action id="Zest.InlineCompletion.TabAccept"
                    class="com.zps.zest.completion.actions.ZestTabAccept"
                    text="Accept Completion (Tab)">
                <keyboard-shortcut first-keystroke="TAB" keymap="$default"/>
            </action>

            <action id="Zest.InlineCompletion.Accept"
                    class="com.zps.zest.completion.actions.ZestAccept"
                    text="Accept Completion">
                <keyboard-shortcut first-keystroke="ctrl ENTER" keymap="$default"/>
            </action>

            <action id="Zest.InlineCompletion.AcceptNextLine"
                    class="com.zps.zest.completion.actions.ZestAcceptNextLine"
                    text="Accept Next Line">
                <keyboard-shortcut first-keystroke="ctrl TAB" keymap="$default"/>
            </action>

            <action id="Zest.InlineCompletion.AcceptNextWord"
                    class="com.zps.zest.completion.actions.ZestAcceptNextWord"
                    text="Accept Next Word">
                <keyboard-shortcut first-keystroke="ctrl RIGHT" keymap="$default"/>
            </action>

            <action id="Zest.InlineCompletion.CycleNext"
                    class="com.zps.zest.completion.actions.ZestCycleNext"
                    text="Cycle Next Completion">
                <keyboard-shortcut first-keystroke="alt DOWN" keymap="$default"/>
            </action>

            <action id="Zest.InlineCompletion.CyclePrevious"
                    class="com.zps.zest.completion.actions.ZestCyclePrevious"
                    text="Cycle Previous Completion">
                <keyboard-shortcut first-keystroke="alt UP" keymap="$default"/>
            </action>

            <action id="Zest.InlineCompletion.Dismiss"
                    class="com.zps.zest.completion.actions.ZestDismiss"
                    text="Dismiss Completion">
                <keyboard-shortcut first-keystroke="ESCAPE" keymap="$default"/>
            </action>
        </group>

        <group id="ZestGroup" text="Zest" description="Zest AI-powered development tools" popup="true"
               icon="icons/zest.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
        </group>


        <action id="Zest.InlineChatAction"
                class="com.zps.zest.inlinechat.InlineChatAction"
                text="Inline AI Edit"
                icon="AllIcons.Actions.IntentionBulb"
                description="Open inline AI editor for context-aware editing">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift SPACE" replace-all="true"/>
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
        </action>


        <action id="Zest.InlineChatAcceptAction"
                class="com.zps.zest.inlinechat.InlineChatAcceptAction"
                text="Accept Inline Edit"
                description="Accept the changes proposed by the inline AI editor"
                keymap="$default"
        />

        <action id="Zest.InlineChatDiscardAction"
                class="com.zps.zest.inlinechat.InlineChatDiscardAction"
                text="Discard Inline Edit"
                description="Discard the changes proposed by the inline AI editor"/>

        <action id="Zest.InlineChatCancelAction"
                class="com.zps.zest.inlinechat.InlineChatCancelAction"
                text="Cancel Inline Edit"
                description="Cancel the inline AI editing operation">
        </action>


<!--        <action id="Zest.TestDiffViewAction"-->
<!--                class="com.zps.zest.inlinechat.TestDiffViewAction"-->
<!--                text="Test Diff View"-->
<!--                description="Test the floating diff view window">-->
<!--            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.InlineChatAction"/>-->
<!--        </action>-->


<!--        <action id="Zest.TestSimpleJCefAction"-->
<!--                class="com.zps.zest.inlinechat.TestSimpleJCefAction"-->
<!--                text="Test Simple JCef"-->
<!--                description="Test if JCef is working properly">-->
<!--            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.TestDiffViewAction"/>-->
<!--        </action>-->


<!--        <action id="Zest.JCefDiagnosticAction"-->
<!--                class="com.zps.zest.inlinechat.JCefDiagnosticAction"-->
<!--                text="JCef Diagnostics"-->
<!--                description="Check JCef configuration and troubleshoot issues">-->
<!--            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.TestSimpleJCefAction"/>-->
<!--        </action>-->

<!--        <action id="Zest.TestQwenCoderAction"-->
<!--                class="com.zps.zest.completion.actions.TestQwenCoderAction"-->
<!--                text="Test Qwen 2.5 Coder Integration"-->
<!--                description="Test and validate Qwen 2.5 Coder FIM configuration and integration">-->
<!--            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.JCefDiagnosticAction"/>-->
<!--        </action>-->

        <!-- New Lean Strategy Actions -->
        <action id="Zest.SwitchCompletionStrategy"
                class="com.zps.zest.completion.actions.ZestSwitchStrategyAction"
                text="Switch Completion Strategy"
                description="Switch between SIMPLE and LEAN completion strategies for A/B testing">
            <keyboard-shortcut first-keystroke="ctrl alt shift S" keymap="$default"/>
            <add-to-group group-id="ZestGroup" anchor="last"/>
        </action>


        <action id="Zest.AgentBasedTestWritingAction"
                class="com.zps.zest.testing.AgentBasedTestWritingAction"
                text="Step-by-Step Test Writing (Agent)"
                icon="com.zps.zest.ZestIcons.TEST_WRITING"
                description="Use an AI agent to write comprehensive tests step-by-step, allowing fine-grained human interaction">
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.InlineChatAction"/>
        </action>


        <action id="com.zps.zest.GenerateTestByLlm"
                class="com.zps.zest.GenerateTestByLlm"
                text="Quick Test Generator (Agent)"
                icon="com.zps.zest.ZestIcons.TEST_WRITING"
                description="Automatically generate tests for the current class">
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.AgentBasedTestWritingAction"/>
        </action>


        <action id="Zest.SendPipelineToChatBox"
                class="com.zps.zest.browser.actions.SendTestPipelineToChatBox"
                text="Test Advisor (Chat)"
                icon="com.zps.zest.ZestIcons.TEST_WRITING"
                description="Get advice on writing tests for this class">
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="com.zps.zest.GenerateTestByLlm"/>
        </action>


        <action id="Zest.AgentBasedRefactoringAction"
                class="com.zps.zest.refactoring.AgentBasedRefactoringAction"
                text="Step-by-Step Refactoring (Agent)"
                icon="com.zps.zest.ZestIcons.TEST_WRITING"
                description="Use an AI agent to implement testability refactoring, allowing fine-grained human interaction">
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.SendPipelineToChatBox"/>
        </action>


        <action id="Zest.RefactorForTestabilityAction"
                class="com.zps.zest.RefactorForTestabilityAction"
                text="Refactoring Advisor (Chat)"
                icon="com.zps.zest.ZestIcons.TEST_WRITING"
                description="Get advice on how to refactor the selected code for testability">
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.AgentBasedRefactoringAction"/>
        </action>


        <action id="Zest.SendCodeReviewToChatBox"
                class="com.zps.zest.browser.actions.SendCodeReviewToChatBox"
                text="Code Review (Chat)"
                icon="icons/zpsChat16.svg"
                description="Get a code review for the current class">
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.RefactorForTestabilityAction"/>
        </action>


        <action id="Zest.GenerateCodeCommentsAction"
                class="com.zps.zest.browser.actions.GenerateCodeCommentsAction"
                text="Add Comments (Agent)"
                description="Generate comments for the selected code">
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.SendCodeReviewToChatBox"/>
        </action>


        <action id="com.zps.zest.ImplementTodosAction"
                class="com.zps.zest.ImplementTodosAction"
                text="Implement TODOs"
                description="Implement TODOs in selected code using AI">
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.GenerateCodeCommentsAction"/>
        </action>


        <action id="Zest.GitCommitMessageGeneratorAction"
                class="com.zps.zest.GitCommitMessageGeneratorAction"
                text="Generate Commit Message (Chat)"
                icon="icons/zpsChat16.svg"
                description="Generate a commit message based on git changes">
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="com.zps.zest.ImplementTodosAction"/>
        </action>


        <action id="Zest.QuickCommitAction"
                class="com.zps.zest.QuickCommitAction"
                text="Quick Commit &amp; Push"
                icon="icons/zpsChat16.svg"
                description="Quick commit and push with auto-generated message">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift Z" second-keystroke="C"/>
            <add-to-group group-id="ZestGroup" anchor="after"
                          relative-to-action="Zest.GitCommitMessageGeneratorAction"/>
            <add-to-group group-id="VcsGroups" anchor="last"/>
        </action>


        <action id="Zest.StartAgentProxyServer"
                class="com.zps.zest.langchain4j.agent.network.StartAgentProxyAction"
                text="Start Agent Proxy Server"
                icon="AllIcons.Nodes.Services"
                description="Start network proxy server for external access to code exploration agent">
            <add-to-group group-id="ZestGroup" anchor="last"/>
        </action>


        <action id="Zest.ToggleDevTools"
                class="com.zps.zest.browser.actions.ToggleDevToolsAction"
                text="Toggle ZPS Chat Developer Tools"
                description="Toggle the visibility of developer tools in ZPS Chat">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>

        <!-- GDiff Actions -->
        <action id="Zest.GDiff.CompareFiles"
                class="com.zps.zest.gdiff.action.CompareFilesAction"
                text="Compare Files with GDiff"
                icon="AllIcons.Actions.Diff"
                description="Compare selected files using GDiff multi-language diff utility">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="after" relative-to-action="CompareFiles"/>
            <add-to-group group-id="EditorTabPopupMenu" anchor="after" relative-to-action="CompareFiles"/>
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.StartAgentProxyServer"/>
        </action>
        
        <!-- Test Actions -->
        <action id="Zest.TestDiffRendering"
                class="com.zps.zest.completion.actions.TestDiffRenderingAction"
                text="Test Diff Rendering"
                icon="AllIcons.Actions.Preview"
                description="Test the diff rendering fixes for side-by-side view and missing lines">
            <add-to-group group-id="ZestGroup" anchor="after" relative-to-action="Zest.GDiff.CompareFiles"/>
        </action>
    </actions>
</idea-plugin>